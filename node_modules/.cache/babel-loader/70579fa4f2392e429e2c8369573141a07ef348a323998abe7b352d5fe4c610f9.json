{"ast":null,"code":"var _jsxFileName = \"C:\\\\PROJECTS\\\\Chat App - React\\\\app\\\\my-app\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { db, auth } from \"../firebase-config\";\nimport { collection, addDoc, where, serverTimestamp, onSnapshot, query, orderBy } from \"firebase/firestore\";\nimport \"../styles/Chat.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Chat = _ref => {\n  _s();\n  let {\n    room,\n    setIsInChat\n  } = _ref;\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messagesRef = collection(db, \"messages\");\n  const chatEndRef = useRef(null);\n  const [user, setUser] = useState({\n    name: auth.currentUser.displayName,\n    photoURL: auth.currentUser.photoURL\n  });\n  useEffect(() => {\n    const queryMessages = query(messagesRef, where(\"room\", \"==\", room), orderBy(\"createdAt\"));\n    const unsuscribe = onSnapshot(queryMessages, snapshot => {\n      let messages = [];\n      snapshot.forEach(doc => {\n        messages.push({\n          ...doc.data(),\n          id: doc.id\n        });\n      });\n      console.log(messages);\n      setMessages(messages);\n    });\n    return () => unsuscribe();\n  }, [room]);\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    // Check if the new message is empty\n    if (newMessage.trim() === \"\") {\n      alert(\"Please type a message before sending.\");\n      return;\n    }\n    await addDoc(messagesRef, {\n      text: newMessage,\n      createdAt: serverTimestamp(),\n      user: auth.currentUser.displayName,\n      room\n    });\n    setNewMessage(\"\");\n  };\n\n  // Handle enter key press for message submission\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      handleSubmit(event);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      style: styles.profileContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header\",\n        style: styles.profileHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.photoURL,\n          alt: \"User Profile\",\n          style: styles.profilePicture\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.profileName,\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      style: styles.chatHeader,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.welcomeText,\n        children: [\"Room Name: \", room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.user === auth.currentUser.displayName ? \"user-message\" : \"other-message\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"user-name\",\n          children: [message.user, \" :\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-text\",\n          children: message.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"new-message-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: event => setNewMessage(event.target.value),\n        onKeyDown: handleKeyPress // Add key press handler\n        ,\n        className: \"new-message-input\",\n        placeholder: \"Type your message here...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-button\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"back-to-room-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsInChat(false),\n        className: \"back-to-room-button\",\n        children: \"Back to Room Input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"eoPkJ5fxYYNd4IGPxAI83pozTlw=\");\n_c = Chat;\nconst styles = {\n  profileContainer: {\n    position: 'absolute',\n    left: '20px',\n    top: '20px',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: '#222',\n    padding: '10px',\n    borderRadius: '5px',\n    boxShadow: '0 2px 5px rgba(0, 0, 0, 0.2)'\n  },\n  profileHeader: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  profilePicture: {\n    width: '40px',\n    height: '40px',\n    borderRadius: '50%',\n    marginRight: '10px'\n  },\n  profileName: {\n    fontSize: '14px',\n    color: '#aaa'\n  },\n  chatHeader: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    // Align content to the right\n    padding: '10px 0',\n    marginTop: '-1px'\n  },\n  welcomeText: {\n    fontFamily: 'Roboto Mono, monospace',\n    // Apply the funky font here\n    fontSize: '35px',\n    // Adjust size as needed\n    color: '#007bff' // Adjust color as needed\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","db","auth","collection","addDoc","where","serverTimestamp","onSnapshot","query","orderBy","Chat","room","setIsInChat","messages","setMessages","newMessage","setNewMessage","messagesRef","chatEndRef","user","setUser","name","currentUser","displayName","photoURL","queryMessages","unsuscribe","snapshot","forEach","doc","push","data","id","console","log","current","scrollIntoView","behavior","handleSubmit","event","preventDefault","trim","alert","text","createdAt","handleKeyPress","key","styles","profileContainer","profileHeader","profilePicture","profileName","chatHeader","welcomeText","map","message","target","value","position","left","top","display","alignItems","backgroundColor","padding","borderRadius","boxShadow","width","height","marginRight","fontSize","color","justifyContent","marginTop","fontFamily"],"sources":["C:/PROJECTS/Chat App - React/app/my-app/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { db, auth } from \"../firebase-config\";\nimport {\n  collection,\n  addDoc,\n  where,\n  serverTimestamp,\n  onSnapshot,\n  query,\n  orderBy,\n} from \"firebase/firestore\";\nimport \"../styles/Chat.css\";\n\nexport const Chat = ({ room, setIsInChat }) => {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messagesRef = collection(db, \"messages\");\n  const chatEndRef = useRef(null);\n  const [user, setUser] = useState({\n    name: auth.currentUser.displayName,\n    photoURL: auth.currentUser.photoURL,\n  });\n\n  useEffect(() => {\n    const queryMessages = query(\n      messagesRef,\n      where(\"room\", \"==\", room),\n      orderBy(\"createdAt\")\n    );\n    const unsuscribe = onSnapshot(queryMessages, (snapshot) => {\n      let messages = [];\n      snapshot.forEach((doc) => {\n        messages.push({ ...doc.data(), id: doc.id });\n      });\n      console.log(messages);\n      setMessages(messages);\n    });\n\n    return () => unsuscribe();\n  }, [room]);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    // Check if the new message is empty\n    if (newMessage.trim() === \"\") {\n      alert(\"Please type a message before sending.\");\n      return;\n    }\n\n    await addDoc(messagesRef, {\n      text: newMessage,\n      createdAt: serverTimestamp(),\n      user: auth.currentUser.displayName,\n      room,\n    });\n\n    setNewMessage(\"\");\n  };\n\n  // Handle enter key press for message submission\n  const handleKeyPress = (event) => {\n    if (event.key === \"Enter\") {\n      handleSubmit(event);\n    }\n  };\n\n  return (\n    <div className=\"chat-app\">\n      <div className=\"profile-container\" style={styles.profileContainer}>\n        <div className=\"profile-header\" style={styles.profileHeader}>\n          <img\n            src={user.photoURL}\n            alt=\"User Profile\"\n            style={styles.profilePicture}\n          />\n          <span style={styles.profileName}>{user.name}</span>\n        </div>\n      </div>\n      <div className=\"chat-header\" style={styles.chatHeader}>\n        <h1 style={styles.welcomeText}>Room Name: {room}</h1>\n      </div>\n      <div className=\"messages\">\n        {messages.map((message) => (\n          <div\n            key={message.id}\n            className={`message ${message.user === auth.currentUser.displayName ? \"user-message\" : \"other-message\"}`}\n          >\n            <span className=\"user-name\">{message.user} :</span>\n            <div className=\"message-text\">{message.text}</div>\n          </div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n      <form onSubmit={handleSubmit} className=\"new-message-form\">\n        <input\n          type=\"text\"\n          value={newMessage}\n          onChange={(event) => setNewMessage(event.target.value)}\n          onKeyDown={handleKeyPress} // Add key press handler\n          className=\"new-message-input\"\n          placeholder=\"Type your message here...\"\n        />\n        <button type=\"submit\" className=\"send-button\">\n          Send\n        </button>\n      </form>\n      <div className=\"back-to-room-container\">\n        <button onClick={() => setIsInChat(false)} className=\"back-to-room-button\">\n          Back to Room Input\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst styles = {\n  profileContainer: {\n    position: 'absolute',\n    left: '20px',\n    top: '20px',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: '#222',\n    padding: '10px',\n    borderRadius: '5px',\n    boxShadow: '0 2px 5px rgba(0, 0, 0, 0.2)',\n  },\n  profileHeader: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  profilePicture: {\n    width: '40px',\n    height: '40px',\n    borderRadius: '50%',\n    marginRight: '10px',\n  },\n  profileName: {\n    fontSize: '14px',\n    color: '#aaa',\n  },\n  chatHeader: {\n    display: 'flex',\n    justifyContent: 'flex-end', // Align content to the right\n    padding: '10px 0',\n    marginTop: '-1px'\n  },\n  welcomeText: {\n    fontFamily: 'Roboto Mono, monospace', // Apply the funky font here\n    fontSize: '35px', // Adjust size as needed\n    color: '#007bff', // Adjust color as needed\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}